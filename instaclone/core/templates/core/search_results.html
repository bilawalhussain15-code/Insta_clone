<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Search Results</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white">

<nav class="bg-gray-800 p-4 flex justify-between items-center">
    <a href="{% url 'home' %}" class="text-xl font-bold">Instaclone</a>

    
    <form action="{% url 'search_users' %}" method="GET" class="flex-1 mx-4">
        <input type="text" name="q" value="{{ query }}" placeholder="Search users..." 
               class="w-full p-2 rounded bg-gray-700 text-white">
    </form> 


    <div class="space-x-4">
        <a href="{% url 'home' %}" class="hover:text-blue-400">Home</a>
        <a href="{% url 'profile' %}" class="hover:text-blue-400">Profile</a>
        <a href="{% url 'logout' %}" class="hover:text-blue-400">Logout</a>
    </div>
</nav>

<div class="max-w-2xl mx-auto mt-6 px-4">
    <h2 class="text-xl font-semibold mb-4">
        {% if query %}Search results for "{{ query }}"{% else %}Search Users{% endif %}
    </h2>

    {% if users %}
        <div class="space-y-3">
            {% for user in users %}
            <div class="flex items-center justify-between bg-gray-800 p-4 rounded-lg">
                <div class="flex items-center space-x-4">
                    {% if user.profile_picture %}
                        <img src="{{ user.profile_picture.url }}" class="w-12 h-12 rounded-full object-cover">
                    {% else %}
                        <div class="w-12 h-12 rounded-full bg-gray-600"></div>
                    {% endif %}
                    <div>
                        <a href="{% url 'user_profile' user.username %}" class="font-semibold hover:underline">
                            {{ user.username }}
                        </a>
                        {% if user.name %}
                            <p class="text-gray-400 text-sm">{{ user.name }}</p>
                        {% endif %}
                        <p class="text-gray-400 text-xs">{{ user.followers_count }} followers</p>
                    </div>
                </div>
                
                {% if user != request.user %}
                <form action="{% url 'follow_toggle' user.username %}" method="POST">
                    {% csrf_token %}
                    {% if user.is_followed %}
                        <button type="submit" class="bg-gray-600 px-4 py-1 rounded text-sm hover:bg-gray-500">
                            Following
                        </button>
                        {% else %}
                        <button type="submit" class="bg-blue-600 px-4 py-1 rounded text-sm hover:bg-blue-500">
                            Follow
                        </button>
                    {% endif %}
                </form>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-gray-400 text-center py-8">
            {% if query %}No users found for "{{ query }}"{% else %}Search for users above{% endif %}
        </p>
    {% endif %}
</div>

</body>
</html>
